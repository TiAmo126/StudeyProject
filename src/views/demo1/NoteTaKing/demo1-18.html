<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>2020/07/15 二分查找变体</title>
</head>

<body>

<h1>二分查找</h1>

<script type="text/javascript">
  (function () {
    // 变形一：找出数组中第一个等于给定值的元素
    function bsearch(arr, target) {
      let left = 0;
      let right = arr.length - 1;
      while (left <= right) {
        let mid = Math.floor((left + right) / 2);
        if (arr[mid] < target) {
          left = mid + 1
        } else if (arr[mid] > target) {
          right = mid - 1
        } else {
          if (mid === 0 || arr[mid - 1] !== target) {
            return mid
          } else {
            right = mid - 1;
          }
        }
      }
      return -1;
    }

    // 变形二：找出数组中最后一个等于给定值的元素
    function csearch(arr, target) {
      let left = 0;
      let right = arr.length - 1;
      while (left <= right) {
        let mid = Math.floor((left + right) / 2);
        if (arr[mid] < target) {
          left = mid + 1
        } else if (arr[mid] > target) {
          right = mid - 1
        } else {
          if (mid === arr.length - 1 || arr[mid + 1] !== target) {
            return mid
          } else {
            left = mid + 1;
          }
        }
      }
      return -1;
    }

    // 变形三：找出数组中第一个大于等于给定值的元素
    function dsearch(arr, target) {
      let left = 0;
      let right = arr.length - 1;
      while (left <= right) {
        let mid = Math.floor((left + right) / 2);
        if (arr[mid] < target) {
          left = mid + 1
        } else if (arr[mid] >= target) {
          if (mid === 0 || arr[mid - 1] < target) {
            return mid
          } else {
            right = mid - 1
          }
        }
      }
      return -1;
    }

    // 变形四：找出数组中第一个小于等于给定值的元素
    function esearch(arr, target) {
      let left = 0;
      let right = arr.length - 1;
      while (left <= right) {
        let mid = Math.floor((left + right) / 2);
        if (arr[mid] <= target) {
          if (mid === arr.length - 1 || arr[mid + 1] > target) {
            return mid
          } else {
            left = mid + 1
          }
        } else if (arr[mid] > target) {
          right = mid - 1
        }
      }
      return -1;
    }

    console.log(bsearch([1, 3, 3, 3, 3, 4], 3));
    console.log(esearch([3, 4, 6, 7, 10], 5));
  })()


</script>
</body>

</html>