<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>深信服笔试</title>
</head>
<body>

<script type="text/javascript">
  //检测参数
  function searchUrl(url, str) {
    let data = [];
    let firstFlag = url.indexOf('?');
    let resultStr = url.substring(firstFlag + 1)
    let strData = resultStr.split('&');
    for (let s of strData) {
      data.push(s.split('='))
    }
    console.log(data)
    for (let d of data) {
      if (str === d[0]) {
        return 'true';
      }
    }
    return 'false';
  }


  //转换端口号
  function change(str) {
    let data = [];
    let result = [];
    let strArr = str.split(',');
    for (let s of strArr) {
      if (s.indexOf('-') != -1) {
        for (let i = Number(s.split('-')[0]); i <= Number(s.split('-')[1]); i++) {
          data.push(i)
        }
      } else {
        data.push(Number(s))
      }
    }
    let data1 = data.filter((item,index,arr) => {
      return index === arr.indexOf(item)
    });
    data1.sort(function (a, b) {
      return a - b
    });
    for (let j = 0; j < data1.length; j++) {
      let k = 0;
      if (data1[j] > data1[j - 1] + 1) {
        result.push(data1[j] + '-' + data1[j - 1]);
        k = j;
        result.push(data1[k]);
      }
    }
    return result;
  }
  console.log(change('1-3,100,102,2-5,108,201'))
</script>
</body>
</html>